# é–‹ç™ºã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€ã‚³ãƒ¼ãƒ‰å“è³ªã¨ä¸€è²«æ€§ã‚’ä¿ã¤ãŸã‚ã®è¤‡æ•°ã®ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ”’ å®Ÿè£…æ¸ˆã¿ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«

### 1. Gitãƒ•ãƒƒã‚¯ (Husky)

ã‚³ãƒŸãƒƒãƒˆå‰ãƒ»ãƒ—ãƒƒã‚·ãƒ¥å‰ã«è‡ªå‹•ã§ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

#### pre-commit
ã‚³ãƒŸãƒƒãƒˆå‰ã«ä»¥ä¸‹ã‚’ãƒã‚§ãƒƒã‚¯:
- **lint-staged**: å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’Lintãƒ»Format
- **Type Check**: TypeScriptã®å‹ãƒã‚§ãƒƒã‚¯

```bash
# æ‰‹å‹•å®Ÿè¡Œ
npx lint-staged
npm run type-check
```

#### commit-msg
ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å½¢å¼ã‚’ãƒã‚§ãƒƒã‚¯:
- Conventional Commitså½¢å¼ã‚’å¼·åˆ¶
- ä¸æ­£ãªå½¢å¼ã®å ´åˆã¯ã‚³ãƒŸãƒƒãƒˆã‚’æ‹’å¦

#### pre-push
ãƒ—ãƒƒã‚·ãƒ¥å‰ã«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ:
- å…¨ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ãªã„é™ã‚Šãƒ—ãƒƒã‚·ãƒ¥ã§ããªã„

```bash
# æ‰‹å‹•å®Ÿè¡Œ
npm run test
```

### 2. ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´„ (Commitlint)

**å½¢å¼**: `<type>: <subject>`

**åˆ©ç”¨å¯èƒ½ãªtype**:
- `feat`: æ–°æ©Ÿèƒ½
- `fix`: ãƒã‚°ä¿®æ­£
- `docs`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- `style`: ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ›´ï¼ˆå‹•ä½œã«å½±éŸ¿ãªã—ï¼‰
- `refactor`: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- `perf`: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„
- `test`: ãƒ†ã‚¹ãƒˆè¿½åŠ ãƒ»ä¿®æ­£
- `build`: ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚„ä¾å­˜é–¢ä¿‚ã®å¤‰æ›´
- `ci`: CIè¨­å®šã®å¤‰æ›´
- `chore`: ãã®ä»–ã®å¤‰æ›´
- `revert`: ã‚³ãƒŸãƒƒãƒˆã®å–ã‚Šæ¶ˆã—

**ä¾‹**:
```bash
git commit -m "feat: add audio file upload functionality"
git commit -m "fix: resolve timestamp display issue"
git commit -m "docs: update README with setup instructions"
```

### 3. ãƒ†ã‚¹ãƒˆç’°å¢ƒ (Vitest)

**å®Ÿè¡Œæ–¹æ³•**:
```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test

# Watch ãƒ¢ãƒ¼ãƒ‰
npm run test:watch

# UI ãƒ¢ãƒ¼ãƒ‰
npm run test:ui

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
npm run test:coverage
```

**ã‚«ãƒãƒ¬ãƒƒã‚¸é–¾å€¤**:
- Lines: 80%
- Functions: 80%
- Branches: 80%
- Statements: 80%

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«é…ç½®**:
```
tests/
â”œâ”€â”€ setup.ts              # ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
â”œâ”€â”€ unit/                 # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ example.test.ts
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ App.test.tsx
â”œâ”€â”€ integration/          # çµ±åˆãƒ†ã‚¹ãƒˆ
â””â”€â”€ e2e/                  # E2Eãƒ†ã‚¹ãƒˆ
```

### 4. GitHub Actions CI/CD

#### CIãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ (.github/workflows/ci.yml)

**ãƒˆãƒªã‚¬ãƒ¼**:
- `push` to main/develop
- `pull_request` to main/develop

**ã‚¸ãƒ§ãƒ–**:
1. **Lint**: ESLintã¨Prettierãƒã‚§ãƒƒã‚¯
2. **Type Check**: TypeScriptå‹ãƒã‚§ãƒƒã‚¯
3. **Test**: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¨ã‚«ãƒãƒ¬ãƒƒã‚¸ç”Ÿæˆ
4. **Build**: å„OSï¼ˆUbuntu, macOS, Windowsï¼‰ã§ãƒ“ãƒ«ãƒ‰ç¢ºèª

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ (.github/workflows/security.yml)

**ãƒˆãƒªã‚¬ãƒ¼**:
- `push` to main/develop
- `pull_request` to main/develop
- æ¯é€±æœˆæ›œæ—¥ 00:00 UTC (ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œ)

**ã‚¸ãƒ§ãƒ–**:
1. **NPM Audit**: ä¾å­˜é–¢ä¿‚ã®è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯
2. **Dependency Review**: PRã®ä¾å­˜é–¢ä¿‚å¤‰æ›´ãƒ¬ãƒ“ãƒ¥ãƒ¼
3. **CodeQL**: ã‚³ãƒ¼ãƒ‰ã®é™çš„è§£æ

### 5. ä¾å­˜é–¢ä¿‚ã®è‡ªå‹•æ›´æ–° (Dependabot)

**è¨­å®š**:
- æ¯é€±æœˆæ›œæ—¥ã«ä¾å­˜é–¢ä¿‚ã‚’ãƒã‚§ãƒƒã‚¯
- è‡ªå‹•ã§PRä½œæˆ
- æœ€å¤§10å€‹ã®PRã¾ã§åŒæ™‚ã‚ªãƒ¼ãƒ—ãƒ³

**å¯¾è±¡**:
- NPM ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
- GitHub Actions

## ğŸ“ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### 1. æ–°æ©Ÿèƒ½ã®å®Ÿè£…

```bash
# 1. ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout -b feat/new-feature

# 2. ã‚³ãƒ¼ãƒ‰å®Ÿè£…
# ... coding ...

# 3. ãƒ†ã‚¹ãƒˆä½œæˆ
# tests/unit/... ã«è¿½åŠ 

# 4. ã‚³ãƒŸãƒƒãƒˆï¼ˆè‡ªå‹•ã§lintãƒ»type checkå®Ÿè¡Œï¼‰
git add .
git commit -m "feat: add new feature"

# 5. ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆè‡ªå‹•ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼‰
git push origin feat/new-feature

# 6. PRä½œæˆ
# GitHubã§PRã‚’ä½œæˆã™ã‚‹ã¨è‡ªå‹•ã§CIãŒå®Ÿè¡Œã•ã‚Œã‚‹
```

### 2. ãƒã‚°ä¿®æ­£

```bash
# 1. ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout -b fix/bug-description

# 2. ãƒã‚°ä¿®æ­£ + ãƒ†ã‚¹ãƒˆè¿½åŠ 
# ... coding ...

# 3. ã‚³ãƒŸãƒƒãƒˆ
git commit -m "fix: resolve bug description"

# 4. ãƒ—ãƒƒã‚·ãƒ¥
git push origin fix/bug-description
```

### 3. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

```bash
# 1. ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout -b refactor/component-name

# 2. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
# ... coding ...

# 3. ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèª
npm run test

# 4. ã‚³ãƒŸãƒƒãƒˆ
git commit -m "refactor: improve component structure"

# 5. ãƒ—ãƒƒã‚·ãƒ¥
git push origin refactor/component-name
```

## ğŸš« ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ã®ãƒã‚¤ãƒ‘ã‚¹

**åŸå‰‡ã¨ã—ã¦æ¨å¥¨ã—ã¾ã›ã‚“ãŒ**ã€ç·Šæ€¥æ™‚ã«ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ã‚’ãƒã‚¤ãƒ‘ã‚¹ã™ã‚‹æ–¹æ³•:

### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒã‚§ãƒƒã‚¯ã®ã‚¹ã‚­ãƒƒãƒ—
```bash
git commit --no-verify -m "emergency fix"
```

### ãƒ—ãƒƒã‚·ãƒ¥å‰ãƒ†ã‚¹ãƒˆã®ã‚¹ã‚­ãƒƒãƒ—
```bash
git push --no-verify
```

**æ³¨æ„**: ãƒã‚¤ãƒ‘ã‚¹ã¯ç·Šæ€¥æ™‚ã®ã¿ä½¿ç”¨ã—ã€å¾Œã§å¿…ãšä¿®æ­£ã—ã¦ãã ã•ã„ã€‚

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Huskyãƒ•ãƒƒã‚¯ãŒå®Ÿè¡Œã•ã‚Œãªã„

```bash
# Huskyã®å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm run prepare

# ãƒ•ãƒƒã‚¯ã«å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸
chmod +x .husky/pre-commit
chmod +x .husky/commit-msg
chmod +x .husky/pre-push
```

### lint-stagedã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹

```bash
# æ‰‹å‹•ã§lintä¿®æ­£
npm run lint:fix
npm run format

# å†åº¦ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "fix: lint errors"
```

### ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹

```bash
# ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦è©³ç´°ç¢ºèª
npm run test

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ
npm run test -- example.test.ts

# UIãƒ¢ãƒ¼ãƒ‰ã§ç¢ºèª
npm run test:ui
```

### TypeScriptå‹ã‚¨ãƒ©ãƒ¼

```bash
# å‹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
npm run type-check

# ã‚¨ãƒ©ãƒ¼è©³ç´°ç¢ºèª
npx tsc --noEmit --pretty
```

## ğŸ“Š ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã®ç¢ºèª

```bash
# ã‚«ãƒãƒ¬ãƒƒã‚¸ç”Ÿæˆ
npm run test:coverage

# ãƒ¬ãƒãƒ¼ãƒˆç¢ºèªï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãï¼‰
open coverage/index.html
```

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

PRã‚’ä½œæˆã™ã‚‹å‰ã«ä»¥ä¸‹ã‚’ç¢ºèª:

- [ ] ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒConventional Commitså½¢å¼
- [ ] Lintã‚¨ãƒ©ãƒ¼ãŒãªã„ (`npm run lint`)
- [ ] ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿ (`npm run format`)
- [ ] å‹ã‚¨ãƒ©ãƒ¼ãŒãªã„ (`npm run type-check`)
- [ ] ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ (`npm run test`)
- [ ] ã‚«ãƒãƒ¬ãƒƒã‚¸é–¾å€¤ã‚’æº€ãŸã—ã¦ã„ã‚‹
- [ ] æ–°æ©Ÿèƒ½ã«ã¯ãƒ†ã‚¹ãƒˆãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

## ğŸ”„ ç¶™ç¶šçš„æ”¹å–„

ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ã¯ç¶™ç¶šçš„ã«æ”¹å–„ã•ã‚Œã¾ã™ã€‚ææ¡ˆãŒã‚ã‚‹å ´åˆã¯issueã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

---

**æœ€çµ‚æ›´æ–°**: 2026-01-03
